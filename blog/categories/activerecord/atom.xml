<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: activerecord | povess notes]]></title>
  <link href="http://bluengreen.github.io/blog/categories/activerecord/atom.xml" rel="self"/>
  <link href="http://bluengreen.github.io/"/>
  <updated>2013-09-21T04:49:09-05:00</updated>
  <id>http://bluengreen.github.io/</id>
  <author>
    <name><![CDATA[Phillip Novess]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[RAILS: Eager Loading in activerecord ignores select method]]></title>
    <link href="http://bluengreen.github.io/blog/2013/09/21/rails-eager-loading-in-activerecord-ignores-select-method/"/>
    <updated>2013-09-21T03:25:00-05:00</updated>
    <id>http://bluengreen.github.io/blog/2013/09/21/rails-eager-loading-in-activerecord-ignores-select-method</id>
    <content type="html"><![CDATA[<p>If your trying to use the select method in Activercord, and you are finding that your select does not work, your issue may be with eager loading. It turns out that when you eager load with the includes method, the select method is completely ignored.</p>

<!-- more -->


<h2>This does not work</h2>

<p>{% codeblock example_controller.rb %}
 @posts = Post.select(&lsquo;title, categories.name AS category_name&rsquo;)</p>

<pre><code>          .joins(:category)
          .includes(:category)
          .where("categories.name='News'")
</code></pre>

<p> @grouped_posts = @posts.group_by(:category_name)
{% endcodeblock %}</p>

<h2>Solution</h2>

<p>Remove the includes.</p>

<p>{% codeblock example_controller.rb %}
  @posts = Post.select(&lsquo;title, categories.name&rsquo;)</p>

<pre><code>           .joins(:category)
           .where("categories.name='News'")
</code></pre>

<p>  @grouped_posts = @posts.group_by(:category_name)   <br/>
{% endcodeblock %}</p>

<h2>Beware</h2>

<p>Beware that this can also happen when using gems that use eager loading. Making it harder to notice that is the issue.</p>

<p>Hope this saves you some time.</p>
]]></content>
  </entry>
  
</feed>
