<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Povess]]></title>
  <link href="http://bluengreen.github.io/atom.xml" rel="self"/>
  <link href="http://bluengreen.github.io/"/>
  <updated>2013-09-21T04:24:16-05:00</updated>
  <id>http://bluengreen.github.io/</id>
  <author>
    <name><![CDATA[Phillip Novess]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[RAILS: Eager Loading in activerecord ignores select method]]></title>
    <link href="http://bluengreen.github.io/blog/2013/09/21/rails-eager-loading-in-activerecord-ignores-select-method/"/>
    <updated>2013-09-21T03:25:00-05:00</updated>
    <id>http://bluengreen.github.io/blog/2013/09/21/rails-eager-loading-in-activerecord-ignores-select-method</id>
    <content type="html"><![CDATA[<p>If your trying to use the select method in Activercord, and you are finding that your select does not work, your issue may be with eager loading. It turns out that when you eager load with the includes method, the select method is completely ignored.</p>

<h2>This does not work</h2>

<figure class='code'><figcaption><span>example_controller.rb </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='rb'><span class='line'> <span class="vi">@posts</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;title, categories.name AS category_name&#39;</span><span class="p">)</span>
</span><span class='line'>              <span class="o">.</span><span class="n">joins</span><span class="p">(</span><span class="ss">:category</span><span class="p">)</span>
</span><span class='line'>              <span class="o">.</span><span class="n">includes</span><span class="p">(</span><span class="ss">:category</span><span class="p">)</span>
</span><span class='line'>              <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;categories.name=&#39;News&#39;&quot;</span><span class="p">)</span>
</span><span class='line'> <span class="vi">@grouped_posts</span> <span class="o">=</span> <span class="vi">@posts</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="ss">:category_name</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Solution</h2>

<p>Remove the includes.</p>

<figure class='code'><figcaption><span>example_controller.rb </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='rb'><span class='line'>  <span class="vi">@posts</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;title, categories.name&#39;</span><span class="p">)</span>
</span><span class='line'>               <span class="o">.</span><span class="n">joins</span><span class="p">(</span><span class="ss">:category</span><span class="p">)</span>
</span><span class='line'>               <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">&quot;categories.name=&#39;News&#39;&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="vi">@grouped_posts</span> <span class="o">=</span> <span class="vi">@posts</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="ss">:category_name</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Beware</h2>

<p>Beware that this can also happen when using gems that use eager loading. Making it harder to notice that is the issue.</p>

<p>Hope this saves you some time.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux CheatSheet]]></title>
    <link href="http://bluengreen.github.io/blog/2013/09/21/linux-cheatsheet/"/>
    <updated>2013-09-21T01:26:00-05:00</updated>
    <id>http://bluengreen.github.io/blog/2013/09/21/linux-cheatsheet</id>
    <content type="html"><![CDATA[<h2>Tar/gzip</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>tar -czvf archive.tgz directory_to_archive</span></code></pre></td></tr></table></div></figure>


<h2>Find stuff</h2>

<p>Find files older than 3 days old and remove them.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>find . -mtime +3 | xargs rm -Rf</span></code></pre></td></tr></table></div></figure>


<h2>Move stuff</h2>

<p>Move files that start with any character between a and m into a directory called dir</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mv [a-m]*  dir</span></code></pre></td></tr></table></div></figure>


<h2>List stuff</h2>

<p>List number of files in the current working directory.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ll | wc -l</span></code></pre></td></tr></table></div></figure>


<h2>Transfer stuff</h2>

<p>Copy local file to remote server.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>scp filename.txt username@servername.com:/path/to/my/remote/dir/filename.txt </span></code></pre></td></tr></table></div></figure>


<p>Copy remote file to local file system.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>scp username@servername.com:/path/to/my/remote/dir/filename.txt ../local/filename.txt </span></code></pre></td></tr></table></div></figure>


<h2>sysadmin</h2>

<p>Look for a process with the keyword mysql</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ps -ef | grep mysql  </span></code></pre></td></tr></table></div></figure>


<p>List iptable rules</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>iptables -L </span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
</feed>
